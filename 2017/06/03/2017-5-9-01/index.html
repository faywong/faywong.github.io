<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="android," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="概要本文档简述了推荐的 android 平台开发代码风格指南 源代码文件文件命名以本文件中最顶级class名加上.java后缀命名，且大小写敏感 文件编码UTF-8 特殊字符空白字符只允许ascii水平空白符(0x20) 文件组织一般，一份源代码文件按照如下结构组织：  授权、版权信息，如果有 包声明 导入声明 只包含一个顶级类  并以一个空白行分隔以上每部分  包声明包声明不要进行行截断(见段4">
<meta name="keywords" content="android">
<meta property="og:type" content="article">
<meta property="og:title" content="android 代码风格指南">
<meta property="og:url" content="http://faywong.github.io/2017/06/03/2017-5-9-01/index.html">
<meta property="og:site_name" content="blog of faywong">
<meta property="og:description" content="概要本文档简述了推荐的 android 平台开发代码风格指南 源代码文件文件命名以本文件中最顶级class名加上.java后缀命名，且大小写敏感 文件编码UTF-8 特殊字符空白字符只允许ascii水平空白符(0x20) 文件组织一般，一份源代码文件按照如下结构组织：  授权、版权信息，如果有 包声明 导入声明 只包含一个顶级类  并以一个空白行分隔以上每部分  包声明包声明不要进行行截断(见段4">
<meta property="og:updated_time" content="2017-06-03T04:16:31.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android 代码风格指南">
<meta name="twitter:description" content="概要本文档简述了推荐的 android 平台开发代码风格指南 源代码文件文件命名以本文件中最顶级class名加上.java后缀命名，且大小写敏感 文件编码UTF-8 特殊字符空白字符只允许ascii水平空白符(0x20) 文件组织一般，一份源代码文件按照如下结构组织：  授权、版权信息，如果有 包声明 导入声明 只包含一个顶级类  并以一个空白行分隔以上每部分  包声明包声明不要进行行截断(见段4">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://faywong.github.io/2017/06/03/2017-5-9-01/"/>





  <title>android 代码风格指南 | blog of faywong</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">blog of faywong</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">love coding, love life</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://faywong.github.io/2017/06/03/2017-5-9-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="faywong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="blog of faywong">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">android 代码风格指南</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-03T12:16:31+08:00">
                2017-06-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/06/03/2017-5-9-01/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/03/2017-5-9-01/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h3><p>本文档简述了推荐的 android 平台开发代码风格指南</p>
<h3 id="源代码文件"><a href="#源代码文件" class="headerlink" title="源代码文件"></a>源代码文件</h3><h4 id="文件命名"><a href="#文件命名" class="headerlink" title="文件命名"></a>文件命名</h4><p>以本文件中最顶级class名加上.java后缀命名，且大小写敏感</p>
<h4 id="文件编码"><a href="#文件编码" class="headerlink" title="文件编码"></a>文件编码</h4><p>UTF-8</p>
<h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><h4 id="空白字符"><a href="#空白字符" class="headerlink" title="空白字符"></a>空白字符</h4><p>只允许ascii水平空白符(0x20)</p>
<h4 id="文件组织"><a href="#文件组织" class="headerlink" title="文件组织"></a>文件组织</h4><p>一般，一份源代码文件按照如下结构组织：</p>
<ul>
<li>授权、版权信息，如果有</li>
<li>包声明</li>
<li>导入声明</li>
<li>只包含一个顶级类</li>
</ul>
<p>并以一个空白行分隔以上每部分</p>
<ol>
<li><p>包声明<br>包声明不要进行行截断(见段4.5)，每行最多100列的限制不会施加于包声明</p>
</li>
<li><p>导入声明<br> 导入声明不要进行行截断（见段4.5），每行最多100列的限制不会施加于导入声明<br> 导入声明按以下规则分组：</p>
<p> 所有static导入为一组</p>
<p> 第三方的，按照顶级包的字母序排列，例如：android, com, junit, org, sun<br> java， javax打头的</p>
<p> 组内按照字母序排序<br> 不要使用通配符式导入，而是使用完全限定名称的类<br> 推荐：<code>import foo.Bar;</code>（优点是显式指定了特定的类）<br> 不推荐：<code>import foo.*;</code>（优点是少写import声明，但是可读性差，且给维护者带来了代价）</p>
</li>
<li><p>类声明</p>
<ul>
<li>每源代码有且仅有一个顶级类</li>
<li>成员函数的排列顺序  <br><br>一般应该按照逻辑集中的规则来排列（例如操作同一数据的方法尽量放在一起），而不要是新近添加的方法总是放在最后</li>
<li>重载的多个函数应该连续排列</li>
</ul>
</li>
</ol>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><p>术语：块级结构指：类、方法、构造方法体（若数组以语句块的形式初始化，也视为块级结构）</p>
<ol>
<li><p>花括号  <br><br> 花括号应该与if, else, for, do, while语句一起使用，即便其内容为空或只包含单行语句</p>
</li>
<li><p>非空语句块采用K&amp;R风格  <br><br>  对于非空语句块，花括号遵循K&amp;R风格<br></p>
<ul>
<li>左括号前不换行</li>
<li>左括号后换行</li>
<li>右括号前换行</li>
<li>如果右括号结束一个语句块或者函数体、构造函数体或者有命名的类体，则需要换行。但当右括号后面接else或者逗号时，不应该换行, 例如：</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> MyClass() &#123;</div><div class="line">  <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (condition()) &#123;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        something();</div><div class="line">      &#125; <span class="keyword">catch</span> (ProblemException e) &#123;</div><div class="line">        recover();</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ol>
<li>空白块级结构使用场景  <br><br>方法体为空，或空的构造方法(一个空的语句块，可以在左花括号之后直接接右花括号，中间不需要空格或换行，使代码更简洁),例如：</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">doNothing</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmptyConstruct</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EmptyConstruct</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li><p>块级缩进  <br><br>4个空白字符（同时适用于代码和注释）</p>
</li>
<li><p>一条语句占一行</p>
</li>
<li><p>列数限制  <br><br>超出100列长度的行应该进行断行（见下一段）  <br><br>例外：  <br></p>
<ul>
<li>没法遵循以上限制，比如JavaDoc中很长的URL，或一个很长的<a href="http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsJSNI.html" target="_blank" rel="external">JSNI</a>方法引用</li>
<li>包声明，导入声明</li>
<li>可以被直接拷贝粘贴到shell中的命令</li>
</ul>
</li>
<li><p>断行  <br><br>术语说明：当一行代码按照其他规范都合法，只是为了避免超出行长度限制而换行时，称为长行断行</p>
<ul>
<li>在何处进行断行  <br><br> 一个原则：尽可能选择在更高的句法级别上进断行，且：<pre><code>1. 若遇到非赋值操作符，则在该符号前截断。这条规则同样适用于点操作符的.，类型组合符（&lt;T extends Foo &amp; Bar&gt;），catch块中的管道线（catch (FooException | BarException e)）
2. 若遇到赋值操作符，则在该符号后截断。这条规则同样适用于类赋值操作符（foreach 语句中的:），例如：
</code></pre></li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">IAccessibilityServiceConnection connection =</div><div class="line">    AccessibilityInteractionClient.getInstance().getConnection(mConnectionId);</div><div class="line">IAccessibilityServiceConnection connection = AccessibilityInteractionClient</div><div class="line">        .getInstance().getConnection(mConnectionId);</div></pre></td></tr></table></figure>
<pre><code>    3. 方法名或构造方法名与跟随其后的开括号保持连续
    4. `,`紧跟它之前的符号

* 缩进后续行最低4个空白字符（建议8个空白字符）  &lt;br /&gt;
    截断后的后续行（即不包含第一行）相对原始行最低缩进4个（建议8个）空白字符，多个后续行的情形下，若他们属于同一层的句法元素，则应保持相同的缩进级别

* 空白字符
   1. 垂直空白
      单行空行在以下情况使用：
</code></pre><p>a、类成员间需要空行隔开：例如成员变量、构造函数、成员函数、内部类、静态初始化语句块（static initializers）、实例初始化语句块（instance initializers）。<strong>例外：成员变量之间的空白行不是必需的。</strong> 一般多个成员变量中间的空行，是为了对成员变量做逻辑上的分组。</p>
<p>b、在函数内部，根据代码逻辑分组的需要，设置空白行作为间隔。</p>
<p>c、类的第一个成员之前，或者最后一个成员结束之后，用空行间隔。（可选）</p>
<p>d、本文档中其他部分介绍的需要空行的情况。（例如 3.3节中的import语句）<br>单空行时使用多行空行是允许的，但是不要求也不鼓励。</p>
<pre><code>2. 水平空白
除了语法、其他规则、词语分隔、注释和javadoc外，水平的ASCII空格只在以下情况出现：
</code></pre><p>a、所有保留的关键字与紧接它之后的位于同一行的左括号之间需要用空格隔开。（例如if、for、catch）</p>
<p>b、所有保留的关键字与在它之前的右花括号之间需要空格隔开。（例如else、catch）</p>
<p>c、在左花括号之前都需要空格隔开。只有两种例外：<br>    @SomeAnnotation({a, b})<br>  String[][] x = foo;</p>
<p>d、所有的二元运算符和三元运算符的两边，都需要空格隔开。<br>e、逗号、冒号、分号和右括号之后，需要空格隔开。</p>
<p>f、// 双斜线开始一行注释时。双斜线两边都应该用空格隔开。并且可使用多个空格，但是不做强制要求。</p>
<p>g、变量声明时，变量类型和变量名之间需要用空格隔开。</p>
<p>h、初始化一个数组时，花括号之间可以用空格隔开，也可以不使用。（例如：new int[] {5, 6} 和 new int[] { 5, 6 } 都可以）</p>
<p>注意：这一原则不影响一行开始或者结束时的空格。只针对行内部字符之间的隔开。</p>
<ol>
<li>特殊结构<ol>
<li>修饰符<pre><code>若存在，类和方法的修饰符应该按照以下顺序排列：
</code></pre><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">protected</span> <span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> <span class="keyword">volatile</span> <span class="keyword">synchronized</span> <span class="keyword">native</span> <span class="keyword">strictfp</span></div></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><ol>
<li><p>类名<br>大写打头的驼峰风格</p>
</li>
<li><p>方法名<br>小写打头的驼峰风格<br>最好以动词，或动宾短语命名  <br><br>唯一建议使用下划线的地方是在JUnit中用于为多个测试方法进行逻辑分组，一个典型的模式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">test&lt;MethodUnderTest&gt;_&lt;state&gt;</div><div class="line">testPop_emptyStack <span class="comment">// example</span></div></pre></td></tr></table></figure>
<p>缩略词当做单词对待，而不要保持全大写（比如推荐命名为getUrl, 而不是getURL）</p>
</li>
<li><p>常量名<br>所有字母大写，单词之间以下划线分割<br>例如：</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Constants</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NUMBER = <span class="number">5</span>;</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> ImmutableList&lt;String&gt; NAMES = ImmutableList.of(<span class="string">"Ed"</span>, <span class="string">"Ann"</span>);</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> Joiner COMMA_JOINER = Joiner.on(<span class="string">','</span>);  <span class="comment">// because Joiner is immutable</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> SomeMutableType[] EMPTY_ARRAY = &#123;&#125;;</div><div class="line"><span class="keyword">enum</span> SomeEnum &#123; ENUM_CONSTANT &#125;</div><div class="line"><span class="comment">// Not constants</span></div><div class="line"><span class="keyword">static</span> String nonFinal = <span class="string">"non-final"</span>;</div><div class="line"><span class="keyword">final</span> String nonStatic = <span class="string">"non-static"</span>;</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> Set&lt;String&gt; mutableCollection = <span class="keyword">new</span> HashSet&lt;String&gt;();</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> ImmutableSet&lt;SomeMutableType&gt; mutableElements = ImmutableSet.of(mutable);</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> Logger logger = Logger.getLogger(MyClass.getName());</div><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> String[] nonEmptyArray = &#123;<span class="string">"these"</span>, <span class="string">"can"</span>, <span class="string">"change"</span>&#125;;</div></pre></td></tr></table></figure>
<ol>
<li>驼峰规则<br> 如何将英文词汇转换为符合驼峰规则的标识符</li>
</ol>
<table>
<thead>
<tr>
<th>语义</th>
<th>推荐</th>
<th>不建议</th>
</tr>
</thead>
<tbody>
<tr>
<td>“XML HTTP request”</td>
<td>XmlHttpRequest</td>
<td>XMLHTTPRequest</td>
</tr>
<tr>
<td>“new customer ID”</td>
<td>newCustomerId</td>
<td>newCustomerID</td>
</tr>
<tr>
<td>“inner stopwatch”</td>
<td>innerStopwatch</td>
<td>innerStopWatch</td>
</tr>
<tr>
<td>“supports IPv6 on iOS?”</td>
<td>supportsIpv6OnIos</td>
<td>supportsIPv6OnIOS</td>
</tr>
<tr>
<td>“YouTube importer”</td>
<td>YouTubeImporter</td>
<td>YoutubeImporter</td>
</tr>
</tbody>
</table>
<p>可接受但不推荐的情形:  <br><br>  “nonempty”和”non-empty”都是合法的英文单词, 所以checkNonempty和checkNonEmpty都可以认为正确</p>
<p>注意：请命名时一定准备一本英文词典在附近，不要出现基本的英文拼写错误，目前已经发现的案例有：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">behaviour/behavor, pool/poll, request/reqeust, <span class="keyword">continue</span>, external, prerference</div></pre></td></tr></table></figure>
<h3 id="编程实践"><a href="#编程实践" class="headerlink" title="编程实践"></a>编程实践</h3><p>尽量使用@Override(不管是扩展重写方法还是实现接口)来避免直到运行时才可以发现的错误<br><br><br>例如以下打字错误只有在运行时才能发现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oncreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>而采用以下写法错误在编译时就能被发现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">oncreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不要完全忽略异常，尽管这非常诱人</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">  <span class="keyword">int</span> i = Integer.parseInt(response);</div><div class="line">  <span class="keyword">return</span> handleNumericResponse(i);</div><div class="line">&#125; <span class="keyword">catch</span> (NumberFormatException ok) &#123;</div><div class="line">  <span class="comment">// it's not numeric; that's fine, just continue</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> handleTextResponse(response);</div></pre></td></tr></table></figure>
<p>绝对不要这么做。也许你会认为：<br>你的代码永远不会碰到这种出错的情况，或者处理异常并不重要，<br>可类似上述忽略异常的代码将会在代码中埋下一颗地雷，说不定哪天它就会炸到某个人了。<br>你必须在代码中以某种规矩来处理所有的异常。根据情况的不同，处理的方式也会不一样。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">无论何时，空的catch语句都会让人感到不寒而栗。</div><div class="line">然很多情况下确实是一切正常，但至少你不得不去忧虑它。在Java中你无法逃离这种恐惧感。&quot;</div><div class="line">                                -James Gosling</div></pre></td></tr></table></figure>
<p>可接受的替代方案包括（按照推荐顺序）:</p>
<p>1) 向方法的调用者抛出异常</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span><span class="params">(String value)</span> <span class="keyword">throws</span> NumberFormatException </span>&#123;</div><div class="line">    serverPort = Integer.parseInt(value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2) 根据抽象级别抛出新的异常<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span><span class="params">(String value)</span> <span class="keyword">throws</span> ConfigurationException </span>&#123;</div><div class="line">   <span class="keyword">try</span> &#123;</div><div class="line">       serverPort = Integer.parseInt(value);</div><div class="line">   &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</div><div class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> ConfigurationException(<span class="string">"Port "</span> + value + <span class="string">" is not valid."</span>);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3) 默默地处理错误并在catch {}语句块中替换为合适的值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span><span class="params">(String value)</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        serverPort = Integer.parseInt(value);</div><div class="line">    &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</div><div class="line">        serverPort = <span class="number">80</span>;  <span class="comment">// default port for server</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>4) 捕获异常并抛出一个新的RuntimeException。这种做法比较危险：只有确信发生该错误时最合适的做法就是崩溃，才会这么做<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span><span class="params">(String value)</span> </span>&#123;</div><div class="line">   <span class="keyword">try</span> &#123;</div><div class="line">       serverPort = Integer.parseInt(value);</div><div class="line">   &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</div><div class="line">       <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"port "</span> + value <span class="string">" is invalid, "</span>, e);</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5) 如果确信忽略异常比较合适，那就忽略吧，但必须把合理的原因注释出来<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span><span class="params">(String value)</span> </span>&#123;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">          serverPort = Integer.parseInt(value);</div><div class="line">      &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</div><div class="line">          <span class="comment">// Method is documented to just ignore invalid user input.</span></div><div class="line">          <span class="comment">// serverPort will just be unchanged.</span></div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>例外：在测试用例中一个期望发生的异常<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    emptyStack.pop();</div><div class="line">    fail();</div><div class="line">&#125; <span class="keyword">catch</span> (NoSuchElementException expected) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>尽量不要因为想偷懒而要捕获顶级的Exception<br><br><br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    someComplicatedIOFunction();        <span class="comment">// may throw IOException</span></div><div class="line">    someComplicatedParsingFunction();   <span class="comment">// may throw ParsingException</span></div><div class="line">    someComplicatedSecurityFunction();  <span class="comment">// may throw SecurityException</span></div><div class="line">                                        <span class="comment">// phew, made it all the way</span></div><div class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;                 <span class="comment">// I'll just catch all exceptions</span></div><div class="line">    handleError();                      <span class="comment">// with one generic handler!</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不要这么做。绝大部分情况下，捕获顶级的Exception或Throwable都是不合适的，Throwable更不合适，因为它还包含了Error异常。这种捕获非常危险。<br><br>这意味着本来不必考虑的Exception（包括类似ClassCastException的RuntimeException）被卷入到应用程序级的错误处理中来。<br><br>这会让代码运行的错误变得模糊不清。这意味着，假如别人在你调用的代码中加入了新的异常，编译器将无法帮助你识别出各种不同的错误类型。<br><br>绝大部分情况下，无论如何你都不应该用同一种方式来处理各种不同类型的异常。<br></p>
<p>当你执意想这样做：<br><br>在开始之前，你应该非常仔细地考虑一下，并在注释中解释清楚为什么这么做是安全的<br></p>
<p>比捕获顶级Exception更好的方案：<br></p>
<p>分开捕获每一种异常，在一条try语句后面跟随多个catch语句块。<br><br>这样可能会有点别扭，但总比捕获所有Exception要好些。请小心别在catch语句块中重复执行大量的代码。</p>
<p>重新组织一下代码，使用多个try块，使错误处理的粒度更细一些。把IO从解析内容的代码中分离出来，根据各自的情况进行单独的错误处理。<br></p>
<p>再次抛出异常。很多时候在你这个级别根本就没必要捕获这个异常，只要让方法抛出该异常即可。<br></p>
<p>请建立一个观点：异常是你的朋友！当编译器指出你没有捕获某个异常时，请不要皱眉头。而应该微笑：编译器帮助你找到了代码中的运行时（runtime）问题。<br></p>
<p>静态成员：通过类名来限定</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line">Foo aFoo = ...;</div><div class="line">Foo.aStaticMethod(); <span class="comment">// good</span></div><div class="line">aFoo.aStaticMethod(); <span class="comment">// bad</span></div></pre></td></tr></table></figure>
<p>永远不要重载finalize方法，除非：<br><br><br>你需要在JNI方法中在Java对象被GC回收时释放native层资源</p>
<p>尽量限制变量的作用域</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// GOOD</span></div><div class="line"><span class="keyword">if</span> (…) &#123;</div><div class="line">    <span class="keyword">double</span> d = someCalculation(…);</div><div class="line">    doSomethingWith(d);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// No use of d</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// BAD</span></div><div class="line"><span class="keyword">double</span> d = <span class="number">0</span>;</div><div class="line"><span class="keyword">if</span> (…) &#123; … &#125; <span class="keyword">else</span> &#123; … &#125;</div></pre></td></tr></table></figure>
<p>为临时性/不完美代码使用TODO注释<br><br><br>TODO注释的格式为：<br><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// <span class="doctag">TODO:</span> &#123;your_comments_here&#125;</span></div></pre></td></tr></table></figure></p>
<p>类和方法前的概述段一般是名词或动词短语，而不要是一整句话，比如：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// BAD</span></div><div class="line">A &#123;<span class="meta">@code</span> Foo&#125; is a...</div><div class="line"><span class="comment">// BAD too</span></div><div class="line">This method returns...</div></pre></td></tr></table></figure>
<p>也不要是一个祈使句：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Save the record..</div></pre></td></tr></table></figure></p>
<p>然而需要注意的是：概述段需要想完整的一句话一样打头字母大写，添加合适的标点等等</p>
<p>正确的注释，例如android AOSP项目中类<em>MediaCodecInfo</em>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Provides information about a given media codec available on the device. You can</div><div class="line"> * iterate through all codecs available by querying &#123;<span class="doctag">@link</span> MediaCodecList&#125;...</div><div class="line"> */</div><div class="line"> <span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MediaCodecInfo</span> </span>&#123;</div><div class="line"> ......</div></pre></td></tr></table></figure>
<p>每个类和自建的public方法必须包含Javadoc注释<br><br><br>注释至少要包含描述该类或方法用途的语句。并且该语句应该用第三人称的动词形式来开头</p>
<p>组织方法的原则</p>
<ul>
<li>简短(对方法的代码长度并没有硬性的限制，但通常如果方法代码超过了40行，就该考虑是否可以在不损害程序结构的前提下进行分拆)</li>
<li>专注于完成单一功能</li>
<li>可重用</li>
<li>易于测试</li>
</ul>
<p><strong> 版权归 faywong 所有，转载请注明出处 </strong></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/android/" rel="tag"># android</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/03/weixin_xiaochengxu_01/" rel="next" title="纠正对微信小程序的一个认知">
                <i class="fa fa-chevron-left"></i> 纠正对微信小程序的一个认知
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/03/2015-01-15-first/" rel="prev" title="WebView中支持input type="file"元素">
                WebView中支持input type="file"元素 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/06/03/2017-5-9-01/"
           data-title="android 代码风格指南" data-url="http://faywong.github.io/2017/06/03/2017-5-9-01/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpeg"
               alt="faywong" />
          <p class="site-author-name" itemprop="name">faywong</p>
           
              <p class="site-description motion-element" itemprop="description">blog of faywong, faywong</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#概要"><span class="nav-number">1.</span> <span class="nav-text">概要</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#源代码文件"><span class="nav-number">2.</span> <span class="nav-text">源代码文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#文件命名"><span class="nav-number">2.1.</span> <span class="nav-text">文件命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件编码"><span class="nav-number">2.2.</span> <span class="nav-text">文件编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#特殊字符"><span class="nav-number">2.3.</span> <span class="nav-text">特殊字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#空白字符"><span class="nav-number">2.4.</span> <span class="nav-text">空白字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件组织"><span class="nav-number">2.5.</span> <span class="nav-text">文件组织</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#格式"><span class="nav-number">3.</span> <span class="nav-text">格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名"><span class="nav-number">4.</span> <span class="nav-text">命名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编程实践"><span class="nav-number">5.</span> <span class="nav-text">编程实践</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">faywong</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"faywong"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  
















  





  

  

  

  

  

  

</body>
</html>
