title: "android4.1上WebView页面加载成功时出现IllegalArgumentException"
tags: ["android"]
---

异常的堆栈如下：

```java
java.lang.IllegalArgumentException: bad parameter
   at org.apache.http.client.utils.URLEncodedUtils.parse(URLEncodedUtils.java:139)
   at org.apache.http.client.utils.URLEncodedUtils.parse(URLEncodedUtils.java:76)
   at android.webkit.AccessibilityInjector.getAxsUrlParameterValue(AccessibilityInjector.java:412)
   at android.webkit.AccessibilityInjector.shouldInjectJavaScript(AccessibilityInjector.java:327)
   at android.webkit.AccessibilityInjector.onPageFinished(AccessibilityInjector.java:286)
   at android.webkit.WebViewClassic.onPageFinished(WebViewClassic.java:4088)
   at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:332)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:137)
   at android.app.ActivityThread.main(ActivityThread.java:4829)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:511)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
   at dalvik.system.NativeStart.main(Native Method)
```
相关的google code android project里边的issue中论述如下：

"
A customer of mine running 4.1.2 just informed me that the issue is still
present! After this issue crashes my app, I have to pop up a dialog 
telling them to disable all accessibility services.
Worst user experience ever, but what else can I do. 
......
Fixed in an internal build, to be released in the next major release.
......
The bug doesn't occur here in 4.2.1 (Galaxy Nexus, JOP40D).
"