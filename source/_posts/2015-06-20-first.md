title: "[pgsql]仅当主key不存在时插入记录"
tags:  ["postgresql"]
---

比如创建一个用户时只有在不存在的时候才需要插入，查了好久，终于搞明白：

```sql
INSERT INTO users(id, alias, email) SELECT 00001, 'faywong', 'wangfei584521@163.com' from users WHERE NOT EXISTS (SELECT * FROM users WHERE id = 00001)
```
pqsql在这点上真叫一个繁琐！